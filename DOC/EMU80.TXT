

                         Эмулятор компьютеров

            "Партнер", "Радио-86РК", "Апогей", "Микроша",
              "Специалист", "Орион", "Микро-80", "ЮТ-88"

                             Версия 2.86



  Если вы ранее не работали на данных ПК, прочтите сначала READ.ME,
       Ответы на часто задаваемые вопросы смотрите в FAQ.TXT ;)
        Информацию о последней версии смотрите в WHATSNEW.285

                             Содержание:


     1. Системные требования.
     1.1. Требования к аппаратному обеспечению.
     1.2. Требования к ОС и особенности работы в них.
     2. Основы работы с программой.
        2.1. Горячие клавиши.
        2.2. Основные режимы.
        2.3. Файл конфигурации.
        2.4. Работа со snapshot'ами и универсальная загрузка.
        2.5. Работа с командной строкой.
        2.6. Работа с магнитофоном.
        2.7. Работа с образами дисков.
        2.8. Работа с клавиатурой.
        2.9. Переключение Мониторов.
        2.10. Дополнительные сведения.
     3. Замечания по реализации.
        3.1. Ограничения в эмуляции.
        3.2. Особенности режимов эмулятора.
     4. Основные отличия ПК "Партнер",  "Радио-86РК", "Апогей" и
        "Микроша".
     5. Будущие версии.
     6. Известные проблемы.
     7. Распространение.
     8. История.
     9. Благодарности.


     1. Системные требования.

     Предлагаемый эмулятор обеспечивает выполнение на  IBM-совместимых
компьютерах программ, разработанных для ПК перечисленных типов, а так-
же, с некоторыми ограничениями, для их аналогов.

     1.1. Требования к аппаратному обеспечению:
       
       - IBM PC AT-286
         Скорость эмуляции соответствующая.  Для работы следует  вклю-
         чить  перехват  0F809H  и,  возможно,  отключить эмуляцию ви-
         део-ОЗУ. Из-за этого многие программы работать не будут. (Без
         крайней необходимости не рекомендуется.)

       - 386 SX-40
         Работа замедлена, но работать можно.

       - 486 DX5-133
         На многих  программах  достигается  100%-ная  скорость работы
         (кроме режима "Граф"),  но далеко не на всех (хотя замедление
         и не очень заметно)

       - Pentium (любой)
         Никаких проблем, если только не используется старая
         видеокарта.

       - Видеоадаптер CGA (настоятельно рекомендуется VGA, для "Специ-
         алиста" и "Ориона" - обязателен).

     Вообще говоря,  изменяя  настройки,  практически всегда можно до-
биться приемлемой  скорости  работы.  Однако  процент  работоспособных
программ при этом снизится.


     1.2. Требования к ОС и особенности работы в них.

     Эмулятор имеет следующие особенности работы в различных ОС:

       - DOS
         Особенностей работы нет.

       - Windows 95
         Особенностей работы нет.

       - Windows 98
         Не очень хорошее качество звука при его выводе на встроенный
         динамик.

       - Windows 3.1x
         На 486-х  машинах возможно замедление работы при выводе звука
         на PC Speaker.

        - OS/2
         Без проблем  работает при выводе звука на Sound Blaster.  При
         работе с PC Speaker - замедление  работы  и  плохое  качество
         звука.

       - Linux DOSEmu
         Работает нормально в консольном режиме (запуск dos -ckV),  но
         вывод  звука возможен только на PC Speaker (по крайней мере в
         текущей версии DOSEmu).  Иногда наблюдаются проблемы при эму-
         ляции Специалиста, вероятно связанные с ошибками в DOSEmu.

       - Windows NT/2000
         Не рекомендуется. Работа замедлена вне зависимости от быстро-
         действия компьютера.  Звук выводится только  на  PC  Speaker,
         качество звука  плохое.  Необходимо  поставитиь  в  ini-файле
         led=off.


     2. Основы работы с программой.

     Исполняемый модуль программы - emu80.com

     После запуска эмулятора вы попадаете в Монитор одного из ПК  (оп-
ределяется в ini-файле),  откуда Вы можете исполнять директивы,  в нем
реализованные. Для ПК "Орион" после Монитора сразу загружается ORDOS и
оболочка  VC$.  После этого Вы можете загружать и запускать программы.
Загрузка при этом происходит с диска (см. ниже). Однако набор эмулиру-
емых  функций  несколько  различается для разных ПК.  Для переключения
между различными типами эмулируемых компьютеров  используется  клавиша
F9.

     2.1. Горячие клавиши:

     F10 - выход в меню
     F9  - выбор модели ПК
     Alt-F9 - выбор модели без очистки памяти
     Alt-F8 - выбор Монитора
     Alt-F1 - подсказка
     Alt-F11 - reset
     Alt-F10 - выход
     F12 - режим паузы
     Alt-F2 - запись snapshot'а
     Alt-F3 - универсальная загрузка (все поддерживаемые форматы)
     Alt-F5 - выбор образа диска A: для "Ориона"
     Alt-F6 - выбор образа диска B: для "Ориона"
     Alt-PgUp - ускорение работы эмулятора
     Alt-PgDn - замедление работы эмулятора
     ScrollLock - переключение режимов клавиатуры (QWERTY/ЙЦУКЕН)

     Подробнее они будут рассмотрены ниже.


     2.2. Основные режимы:

     Для управления  режимами работы эмулятора используется окно наст-
роек, вызываемое с помощью клавиши F10.  Перемещение в  пределах  окна
осуществляется с помощью клавиш управления курсором,  возврат в эмуля-
тор - с помощью ESC, сброс компьютера - по клавише R,  выход из эмуля-
тора - по клавише Q и вызов справки - по клавише F1.

     * Скорость:

       Норм.   - соответствует нормальной скорости работы  эмулируемых
                 компьютеров
       Без ПДП - соответствует скорости работы процессора 8080 без ре-
                 жима ПДП
       Макс.   - максимальная скорость эмуляции (до 40x)

     Примечания: В режиме максимальной скорости реакция на клавишу F10
                 может запоздать на несколько секунд (на медленных ма-
                 шинах).


      * Эмуляция в/пам и портов:

       Нет   - обращения к памяти не перехватываются,  что значительно
               повышает скорость работы.  Скорость  также  значительно
               повышается из-за того,  что в этом режиме автоматически
               включается перехват 0F809H (см.  ниже).  В этом  режиме
               работоспособны  большинство  системных программ и очень
               немного игровых (ЦИРК, РИКОШЕТ, ВУЛКАН ...). Рекоменду-
               ется только на медленных компьютерах (286, XT).

       Зап.  - перехватывается только запись.  Данный режим устанавли-
               вается по умолчанию (кроме "Специалиста" и "Ориона")  и
               подходит  для большинства системных и игровых программ.
               В этом режиме (как и  в  предыдущем)  опрос  клавиатуры
               происходит средствами PC. Работает медленнее.

      Чт/Зап - наиболее полная эмуляция. Клавиатура в этом режиме эму-
               лируется на уровне портов. Работает еще медленнее. Дан-
               ный режим стоит в ini-файле,  распространяемым с эмуля-
               тором.  Рекомендуется переключать на Зап.  только  если
               недостаточно быстродействие компьютера или при работе с
               системными программами, когда желательна комфортная ра-
               бота  с клавиатурой.  Автоматически устанавливается при
               установке режима экрана "Граф".

      Примечания: Замечания  относительно  замедления  скорости работы
                  касаются только медленных компьютеров.  Если же эму-
                  лятор успевает работать со скоростью 100%  от ориги-
                  нального ПК,  то замедления не будет. В режиме Sound
                  Blaster данный  параметр игнорируется и устанавлива-
                  ется Чт/Зап.


     * Перехват 0F809H:

       Да  - при  включенном  режиме все обращения программ к Монитору
             для вывода  на экран перехватываются и выполняются средс-
             твами BIOS PC,  что значительно повышает скорость  работы
             (за счет увеличения скорости вывода на экран),  но подхо-
             дит не для всех программ.  Для выполнения системных прог-
             рамм  на  медленных компьютерах - вполне подходящий вари-
             ант.  Включается по умолчанию при запуске под Windows NT.
             (В ini-файле, распространяемом с эмулятором, выключен).

       Нет - ставится по умолчанию.  Работает медленнее,  но проблем с
             совместимостью при выводе на экран не возникает.  Автома-
             тически  устанавливается в режиме экрана "Граф". В режиме
             Sound Blaster данный параметр игнорируется и равен "Нет".


     * Разрешение экрана:

       Авто  - отображается область видеопамяти в соответствии с пара-
               метрами программирования ВГ75.  На  PC  устанавливается
               видеорежим  80x43  (на  EGA и VGA) или 80x30 (только на
               VGA) и используется необходимая часть  площади  экрана.
               Устанавливается по умолчанию. При запуске на CGA недос-
               тупен.

       Граф. - эмуляция ВГ75 в  графическом  режиме.  Наиболее  полная
               эмуляция экрана  с  поддержкой  дополнительных  наборов
               знакогенератора и атрибутов.

       25    - отображается только центральная часть экрана 64x25, ку-
               да возможен  вывод  стандартными  средствами  Монитора.
               Подходит в основном для системных программ. Ставится по
               умолчанию при запуске на CGA.

       30    - отображается вся стандартная область видеопамяти 78x30.
               Для использования этого режима необходим адаптер VGA.


     * Знакогенератор:

        cp866 - используется  альтернативная  кодовая  таблица IBM PC;
                для отображения символов, отсутствующих в ней, но име-
                ющихся в знакогенераторе РК-86, используются близкие к
                ним по начертанию.  Устанавливается по  умолчанию  при
                запуске под Windows в расширенном режиме, Windows 95 и
                Windows NT.

        РК    - загружается оригинальный знакогенератор РК. Устанавли-
                вается  по умолчанию,  если только не запущен под Win-
                dows. При использовании адаптера EGA доступен только в
                режиме экрана  "Авто".  При использовании CGA недосту-
                пен. Установлен в ini-файле, распространяемом с эмуля-
                тором.


     * Обновление текстового экрана:

        Комб. - комбинированный способ. В основном запись в экран про-
                исходит в реальном времени. Полное  же  обновление эк-
                рана производится только по мере  необходимости  (если
                происходит запись/перезапись управляющих кодов), но не
                чаще 50 раз в секунду.

        50Гц - Запись в реальном времени не происходит,  однако  экран
               обновляется безусловно 50 раз в секунду.  Не рекоменду-
               ется использовать при выводе звука на PC Speaker.

        RT   - Запись в реальном времени.  В этом режиме не происходит
               обработка атрибутов изображения и цвета.


     * Звук

        Вкл.  - звук включен (встроенный динамик)

        Выкл. - звук выключен

        SB    - звук выводится  на  SoundBlaster-совместимую  звуковую
                карту. Это значительно повышает качество звука. Допол-
                нительные настройки заносятся в файл конфигурации.

     * Магнитофон

        Файл  - обращения к магнитофону перенаправляются в файл

        SB-Out- производится вывод  магнитофонного  сигнала  на  Sound
                Blaster

        SB-In - производится ввод магнитофонного сигнала с Sound Blas-
                ter'а

        Примечания: данная опция имеет смысл только при  установленном
                    режиме вывода звука SB, в противном случае она иг-
                    норируется и всегда производится перенаправление в
                    файл; в режиме SB-In вывод звука отсутствует.


     2.3. Файл конфигурации.

     Для хранения установок и режимов эмулятора,  автоматически  уста-
навливаемых при  запуске,  используется  файл  конфигурации emu80.ini.
Данный файл ищется в сначала в текущей директории,  затем в директории
эмулятора,  а в случае его отсутствия применяются настройки по умолча-
нию.  В этом файле устанавливаются вышеперечисленные режимы, начальный
тип эмулируемого ПК и параметры видеорежима. Данные настройки применя-
ются при запуске и могут быть в дальнейшем изменены  с  помощью  меню.
Формат файла конфигурации описан в его примере,  поставляемом вместе с
эмулятором (в комментариях).

     Файл примера содержит настройки, подходящие для работы на быстрых
компьютерах (>=Pentium).  В  случае  использования компьютеров худшего
класса, возможно,  Вам придется внести в этот файл изменения. Рекомен-
дации по применению различных режимов эмуляторы приведены выше в пунк-
те 2.2.


     2.4. Работа со snapshot'ами и универсальная загрузка.

     В эмуляторе  предусмотрена возможность записи его полного состоя-
ния в файл снапшота (.rss).  При этом записывается содержимое  памяти,
регистры и флаги процессора,  состояние внешних устройств и режим эму-
лятора. Данный файл можно в дальнейшем загрузить в эмулятор и  продол-
жить работу с момента его записи.

     Для записи снапшота служит комбинация клавиш Alt-F2.  При этом на
экран выводится запрос имени файла.  Если имя файла будет набрано  без
расширения, то файл будет автоматически сохранен с расширением .rss .

     Для загрузки ранее сохраненного снапшота служит комбинация клавиш
Alt-F3.  При  этом  на экран выводится запрос имени файла.  Можно либо
ввести его вручную (расширение по умолчанию - rss),  либо  выбрать  из
списка, нажав  Enter.

     Формат файла снапшота описан в файле rss.txt, поставляемым с эму-
лятором.

     В состав  пакета входит утилита BIN2RSS,  с помощью которой можно
переносить в адресное пространство эмулируемого  ПК  любые  данные  из
двоичного файла, в том числе пользовательские ПЗУ.

     Также по Alt-F3 могут быть загружены и файлы  большинства  других
форматов,  поддерживаемых эмулятором. (При загрузке файла *.RK? (кроме
RKO) или *.GAM reset производится, поэтому в этом случае рекомендуется
предварительно выполнить перезагрузку по Alt-F11.

     Примечание: при загрузке файла *.BRU или *.RKO происходит очистка
RAMDISK'а,  поэтому  загрузка  сразу  нескольких  файлов  в RAMDISK по
Alt-F3 пока невозможна.


     2.5. Работа с командной строкой.

     Для указания  типа  эмулируемого  компьютера  сразу после запуска
можно использовать следующие ключи:

     -r - запуск в режиме "Радио-86РК"
     -p - запуск в режиме "Партнера"
     -s - запуск в режиме "Специалиста"
     -a - запуск в режиме "Апогея"
     -m - запуск в режиме "Микроши"
     -o - запуск в режиме "Ориона"
     -8 - запуск в режиме "Микро-80"
     -u - запуск в режиме "ЮТ-88"

     В качестве  параметра командной строки эмулятору может быть пере-
даны:

     - имя файла снапшота *.RSS (с расширением), который будет автома-
       тически загружен при запуске

     - имя файла *.RK?  или *.GAM для автоматической загрузки в память
       (загрузки в RAMDISK A: ORDOS для RKO ("Орион"))

     - имя файла *.BRU для автоматической загрузки в RAMDISK A:  ORDOS
       ("Орион")

     - имя файла *.ODI для задания образа диска A: CP/M ("Орион")


     Обычно удобно ассоциировать соответствующие расширения с програм-
мой эмулятора для автоматической загрузки таких файлов. Для неRSS-фай-
лов следует также указать ключ, соответствующий заданному компьютеру.

     Примерs:

     emu80 -a tetris.rka

     Будет произведен запуск эмулятора в режиме "Апогея" и загружен  в
память файл tetris.rka. В дальнейшем для его запуска нужно просто наб-
рать G<Enter>.

     emu80 -o boulder.bru

     Файл BOULDER будет автоматически скопирован  на  диск  A:  ORDOS,
после чего для его запуска останется просто нажать на нем Enter.

     Для удобства использования автор советует ассоциировать программу
EMU80.COM с расширениями .RSS, .RK?, .GAM, .BRU, .ODI (с указанием со-
ответствующих)  ключей с целью более удобной загрузки файлов снапшотов
и программ.

     Примечание: пока  не реализовано одновременное задание нескольких
имен файлов в командной строке.


     2.6. Работа с магнитофоном:

     Для работы с магнитофоном предусмотрены 3 режима: перенаправление
в файл, чтение с магнитофона и запись на него.

     В режиме перенаправления обращений к магнитофону в файл  при  по-
пытке обращения к магнитофону (например,  при выполнении директив I  и
O или CLOAD и CSAVE на бейсике) будет выдан запрос имени файла. В  от-
вет на запрос нужно ввести имя файла (с расширением), из которого  бу-
дет читаться или в который будет записываться информация.  Поддержива-
ются два основных формата файлов - с синхробайтом и без  него. Подроб-
нее эти форматы будут описаны ниже. При чтении формат файла  определя-
ется автоматически.  При записи же можно явно указать формат с помощью
клавиши F3 в окне ввода имени файла.

     Данный эмулятор поддерживает 2 формата файла - с лидирующим синх-
робайтом и  без него.  Формат с лидирующим синхробайтом поддерживается
для совместимости с эмулятором pkemul02 Александра Демина.

     Используются следующие соглашения о расширениях имен файлов:

     RK - общий формат файла без синхробайта (без уточнения)
     RKR - файл Монитора "Радио-86РК" без с/байта
     RKP - файл Монитора "Партнера" без с/байта
     RKM - файл Монитора "Микроши" без с/байта
     RKA - файл Монитора "Апогея" без с/байта
     RKS - файл Монитора "Специалиста" без имени без с/байта
     RKO - файл утилиты CH4$ "Ориона" без с/байта
     RK8 - файл Монитора "Микро-80" без с/байта
     RKU - файл Монитора "ЮТ-88" без с/байта

     PKI - файл Монитора "Радио-86РК" с с/байтом
     BSM - файл BASIC "MICRON" (с заголовком) с с/байтом или без него
     BSS - файл BASIC (без заголовка) с с/байтом или без него
     EDM - файл редактора MICRON с с/байтом или без него
     GAM - файл игровой программы для "Радио-86РК" с с/байтом

     При необходимости файл любого формата можно вывести на магнитофон
или прочитать с него через любую звуковую карту с помощью дополнитель-
ных утилит (находятся в директории UTIL).

     При чтении файла также имеется возможность выбора его из  списка.
Однако, поскольку выбор пока возможен только из текущей директории, то
рекомендуется запускать эмулятор из директории с загружаемыми файлами,
явно указывая путь к исполняемому модулю  или  копировать  исполняемый
файлы эмулятора emu80.com, а также rom?.bin в текущую. При перемещении
по списку файлов используются клавиши "стрелка вверх", "стрелка вниз",
PgUp и PgDn.  Выбор файла - Enter. Файлы различного типа (определяется
по расширению) отображаются разными цветами.

     При работе с эмулятором ПК "Специалист"  рекомендуется  использо-
вать формат  файлов  без  имени в целях совместимости (директивы R и W
для чтения и записи соответственно).

     В двух других режимах производится непосредственная работа с маг-
нитофоном.

     Для успешного чтения файлов с магнитной ленты необходимо восполь-
зоваться  утилитой конфигурирования звуковой карты и правильно указать
источник сигнала и уровень записи. Следует отметить,  что не  на  всех
картах допустимо устанавливать уровень записи по принципу "чем больше,
тем лучше",  зачастую успеха можно добиться только при  весьма  низком
уровне записи. При запуске эмулятора под Windows не всегда можно пола-
гаться на стандартный микшер  Windows,  возможно,  придется  запускать
утилиту конфигурирования для DOS, возможно даже до запуска Windows.

     Мне не удалось добиться устойчивого чтения и записи на магнитофон
для эмулятора Специалиста, а также записи для Микроши, хотя чтение/за-
пись  на  других ПК работают без проблем.  Я не смог пока локализовать
причину этой проблемы,  поэтому буду благодарен за любую информацию на
эту тему. Возможно, у вас эти операции работать будут.


     2.7. Работа с образами дисков.

     В эмуляторе  поддерживается работа с образами дискет для ПК "Ори-
он".  Файлы образов имеют расширение .ODI и представляют собой простую
последовательность секторов  на  диске.  Для  чтения дисков могут быть
применены утилиты других авторов (см. ссылки в FAQ.TXT).

     Для подключения образов дисков A:  и B:  служат комбинации клавиш
Alt-F5 и Alt-F6 соответственно. Может быть также применена универсаль-
ная загрузка для диска A: по Alt-F3.

     Подробности по работе с дисками на "Орионе" смотрите в READ.ME.


     2.8. Работа с клавиатурой.

     Работа с клавиатурой существенно отличается в режимах Чт/Зап и  в
остальных. Во всех режимах,  кроме Чт/Зап, работа с клавиатурой произ-
водится через средства BIOS PC.  Это означает,  что будут работать все
русификаторы вместе  с  их  особенностями в расположении клавиш и т.п.
При этом имеет место следующее соответствие клавиш клавиатуры РК  кла-
виатуре PC:

     Ф1  - F1
     Ф2  - F2, Del
     Ф3  - F3
     Ф4  - F4, Ins
     Ф5  - F5
     ЗБ  - Bsp
     ВК  - Enter
     ПС  - Ctrl-J
     СТР - PgUp
     АР2 - Esc
     ЛАТ - Alt
  Для "Специалиста" дополнительно:
     Ф6  - F6
     Ф7  - F7
     Ф8  - F8
     Edit- Gray 5
     [ ] - End
     [█] - PgDn

     В режиме Чт/Зап устанавливаются следующие соответствия клавиш:

     Ф1  - F1
     Ф2  - F2, Del
     Ф3  - F3
     Ф4  - F4, Ins
     Ф5  - F5
     ЗБ  - Bsp
     ВК  - Enter
     ПС  - Ctrl-J
     СТР - PgUp
     АР2 - Esc
     ЛАТ - CapsLock
     НР  - Shift
     УС  - Ctrl
  Для "Специалиста" дополнительно:
     Ф6  - F6
     Ф7  - F7
     Ф8  - F8
     Edit- NumLock (!)
     [ ] - End
     [█] - PgDn
     ПВ  - Ctrl

     При этом  следует учитывать,  что все используемые русификаторы и
т.п. программы работать не будут. Кроме того, будет установлено взаим-
но однозначное соответствие между клавишами РК и PC.  Поэтому символы,
набираемые на верхнем регистре,  не будут совпадать с символами, изоб-
раженными на клавиатуре PC, а будут соответствовать клавиатуре РК.

     Поэтому, чтобы  облегчить  набор русских букв,  предусмотрены два
режима соответствия буквенных клавиш - для русских букв  и  латинских.
Эти режимы переключаются с помощью клавиши ScrollLock. Включенное сос-
тояние - русская клавиатура.  Это также может быть полезно в некоторых
играх. Например, стрельба производится с помощью клавиш Q и ^. На кла-
виатуре PC они расположены в разных частях клавиатуры.  Включили русс-
кое расположение  с  помощью ScrollLock - и,  пожалуйста,  используйте
Я(Z) и Ч(X) !

     Для "Радио-86РК",  кроме того,  на дополнительной клавиатуре под-
держивается джойстик.  Для управления джойстиком используются  клавиши
1-9, fire-5,Ins или Del. Обратите внимание, что из-за ограничений кла-
виатуры IBM PC не все одновременные нажатия клавиш могут быть  обрабо-
таны (например, 5+6+8 (вправо-вверх+огонь)). Поэтому клавиша fire была
продублирована также на Ins и Del.


     2.9. Переключение Мониторов.

     Используя комбинацию  клавиш  Alt-F8,  Вы  можете выбрать один из
нескольких имеющихся для данного компьютера Мониторов. Разные Мониторы
могут иметь несколько отличающийся набор директив,  что следует учиты-
вать при работе.

     Отдельно стоит сказать о поддержке компьютера "Лик".  По сути де-
ла,  это тот же "Специалист", но с совершенно другим Монитором. Инфор-
мацию по работе с ним можно найти в архиве программ для  этого  компь-
ютера,  подготовленным  А.Болтаевским и находящемся в разделе Download
на сайте эмулятора.  Стоит пожалуй, лишь отдельно упомянуть, что в нем
имеется полезная директива B - запуск встроенного Бейсика.

     Некоторая информация  по директивам Монитора может быть найдена в
файле MONITOR.TXT, который будет в будущем расширен и дополнен.


     2.10. Дополнительные сведения:

     Управление скоростью работы эмулятора производится с помощью ком-
бинаций клавиш Alt-PgUp и Alt-PgDn. первая из них ускоряет работу эму-
лятора на 20%  (максимум в 5 раз), вторая - аналогичным образом замед-
ляет.  При выходе в меню или проведении файловых операций скорость ра-
боты восстанавливается.

     Режим паузы включается/выключается путем нажатия клавиши F12. Па-
уза пока реализована только в режиме доступа к памяти "Чт./Зап". В ре-
жиме паузы имитируется останов процессора,  то есть все остальные уст-
ройства  будут  продолжать работать.  Так,  например,  если таймер был
настроен на генерирование звука,  звук будет продолжаться. Режим паузы
является глобальным для эмулятора,  не записывается в снапшот и не ме-
няется при смене типа компьютера,  смене параметров и т.д. Этим удобно
пользоваться,  например, при загрузке снапшотов: включить режим паузы,
загрузить снапшот, оценить игровую обстановку, выключить режим паузы.

     Определение возможности работы программ и директив Монитора опре-
деляется ограничениями в эмуляции, перечисленными ниже. Отдельно стоит
отметить,  что формат записи на ленту MSX в ПК "Апогей" и "Партнер" не
работает.  ПК "Микроша" и остальные  используют  слегка  различающиеся
форматы  записи  на  ленту,  поэтому возможно несовпадение контрольной
суммы при чтении rk-файла, записанного на компьютере другого типа.

     Все программы,  поставляемые  с эмулятором,  предназначены для ПК
"Партнер".  Автор считает, что этот минимум позволит немного освоиться
с эмулятором,  пока не скачаны дополнительные наборы программ. Поэтому
отдельно приведу несколько замечаний по работе с ПК "Партнер",  касаю-
щихся в основном тех, кто раньше работал на других ПК из числа поддер-
живаемых эмулятором.

   * Для загрузки ассемблера и бейсика необходимо явно их загрузить из
     файлов asm-ed.rk и basic.rk соответственно ,  а затем запустить с
     помощью директивы G (директивы A и B "Партнера" не  поддерживают-
     ся).

   * При первом запуске версии бейсика "Микрон" для "Партнера" необхо-
     димо сразу же ввести команду NEW (иначе возможно зависание). Ана-
     логично, в версии редактора для "Партнера" при первом запуске не-
     обходимо очистить буфер с помощью АР2+N.

   * В Мониторе "Партнера" есть полезная директива Z - поиск  слова  в
     памяти. К сожалению, она не всегда корректно работает.


     3. Замечания по реализации.

     3.1. Ограничения в эмуляции:

     - При выполнении логических команд  флаг  AC  должен  обнуляться.
       Эмулятор оставляет его значение неопределенным.

     - На запись в видео-ОЗУ и порты проверяются не все команды, кото-
       рые могут писать в память,  а только наиболее часто применяемые
       для этой цели (MOV, MVI, STA, STAX, SHLD, INR, DCR, PUSH, CALL,
       CZ, CNZ, CC, CNC, CPE, CPO, CM, CP).

     - На чтение из портов проверяются не все команды,  которые  могут
       читать из памяти,  а только наиболее часто применяемые для этой
       цели (MOV,  LDA,  LDAX, ADD, SUB, ANA, ORA, ADC, SBB, XRA, CMP,
       IN, RET, RZ, RNZ, RC, RNC, RPE, RPO, RM, RP).

     - На обращение к RAM-диску ЮТ-88 проверяются не все команды,  ра-
       ботающие со стеком,  а только PUSH и POP, которые применяются в
       CP/M для этого компьютера.

     - Запрет записи в ПЗУ не реализован в отключенном режиме эмуляции
       видеопамяти и портов.

     - При  программировании  контроллера ЭЛТ программирование ВГ75 на
       количество символов в строке,  отличное  от  78  поддерживается
       только в режиме "Граф".

     - Из порта С ППА поддерживаются только биты,  отвечающие за гене-
       рацию  звука (в ПК "Партнер",  "Микроша" и "Специалист") и бит,
       отвечающий за индикатор РУС/ЛАТ (эмулируется индикатором  Caps-
       Lock  -  его  состояние  устанавливается при нажатии на Scroll-
       Lock).

     - Второй ППА ПК "Радио-86РК", "Апогей" и "Микроша" не поддержива-
       ется (для Микроши поддерживается только бит 7 порта B, отвечаю-
       щий за переключение знакогенератора).

     - Порт DA00 и страничная  организация  памяти  не  поддерживаются
       (для ПК "Партнер").

     - Свободные слоты DC00-DFFF не поддерживаются (для ПК "Партнер").

     - Для команд чтения/записи слова,  кроме команды POP,PUSH,RST от-
       сутствует проверка на адрес операнда=0FFFFH, поэтому при выпол-
       нении такой операции может возникнуть GPF и аварийное  заверше-
       ние  эмулятора при запуске его в режиме виртуального процессора
       8086 (например, под Windows или EMM386).

     - Для дисковода ПК "Орион" пока поддерживается только стандартный
       формат: 80 дорожек, 2 стороны, 5 секторов по 1024 байт.

     - Пока поддерживается только работа с образами дисков,  но  не  с
       реальными дискетами.

     - Пока не поддерживается клавиатура МС7007 для Ориона.

     - Для таймера ВИ53 поддерживаются режимы 3 и (частично)  0.  Под-
       держиваются  все 3 режима записи значений счетчиков (мл.  байт,
       ст. байт, 2 байта). Двоично-десятичный режим счета не поддержи-
       вается.


     3.2. Особенности режимов эмулятора.

     - При включенном режиме вывода звука на Sound Blaster игнорируют-
       ся параметры обращения к памяти и перехвата 0F809H.

     - При включенном графическом режиме эмуляции  ВГ75  автоматически
       включается  режим "Чт/Зап" обращения к памяти и отключается пе-
       рехват 0F809H.

     - Если не установлен режим эмуляции Чт/Зап, обращение к клавиату-
       ре  возможно  только через точки входа 0F803H,  0F812H и 0F81BH
       (0FEEAH для "Микроши").  Программы,  напрямую опрашивающие порт
       клавиатуры, в других режимах работать не будут.

     - Микшер в Sound Blaster Pro и более поздних моделях не поддержи-
       вается, поэтому громкость звука не регулируется.

     - В графическом режиме эмуляции ВГ75 обновление экрана происходит
       50 раз в секунду, из-за чего ухудшается качество звука, выводи-
       мого на PC Speaker.  По этой причине рекомендуется использовать
       вывод звука на Sound Blaster.

     - В графическом режиме эмуляции ВГ75 пока не поддерживаются  коды
       >=F0H  с  остановом  ПДП,  курсоры  различной формы и режим без
       отображения атрибутов.

     - Знакогенераторы ПК "Микроша" и "Апогей"  слегка  отличаются  от
       того,  который  применен в "Радио-86РК" и "Партнере".  Эмулятор
       работает только  с  последним  в  текстовом  режиме.  В  режиме
       "Граф." поддерживается знакогенератор Микроши.

     - В режиме перехвата 0F809H данные  обращения  перехватываются  и
       производится вывод на экран средствами эмулятора с дублировани-
       ем вывода в экранную область эмулируемого ПК.

     - Проверка  нажатия клавиши горячих клавиш осуществляется при пе-
       рехвате обращений к процедурам ввода с клавиатуры,а также в лю-
       бом случае 50 раз в секунду.

     - Эмулятор  переустанавливает  вектор прерывания int 09 (в режиме
       Чт/Зап) и может изменять знакогенератор.  По этой причине  воз-
       можны  проблемы в активизации и искажения в отображении экранов
       некоторых резидентных программ.

     - Опрос клавиатуры в режимах,  отличных от Чт/Зап, осуществляется
       через  BIOS,  поэтому событие отжатия клавиши не отслеживается.
       По этой причине возможна нечеткость управления в некоторых  иг-
       рах.

     - В  режиме  нормальной скорости эмулятор определяет,  включен ли
       режим ПДП и в зависимости от этого устанавливает  соответствую-
       щую скорость эмуляции.

     - Файл в формате .rk?  представляет собой простую  последователь-
       ность посылаемых на магнитофон байтов, исключая ракорд и первый
       синхробайт.

     - Файлы форматов .pki, .gam, .bsm, .bss, edm отличаются от файлов
       формата .rk только наличием первого синхробайта.

     - Файл .bru представляет собой  файл  CP/M,  предназначенный  для
       сохранения файлов ORDOS с помощью утилит ALT33$ или BRU.COM.

     - При установке режима SB-In для Микроши отключается вывод  звука
       от встроенного динамика Микроши, который в противном случае ме-
       шал бы нормальному выводу сигнала на магнитофон.

     - В "Радио-86РК" при обнаружении атрибута цвета "черный  на  чер-
       ном" устанавливается цвет "белый на черном" для совместимости с
       другими реализациями и для устранения необходимости  переключе-
       ния между цветным и черно-белым режимами.

     - Частота звука, генерируемого таймером ПК "Микроша" в режиме вы-
       вода звука на PC Speaker, несколько отличается от оригинальной.

     - Управляющие коды >F0H в текстовом режиме пока не реализованы.

     - Закрытие файла,  считываемого с магнитофона,  происходит в двух
       случаях: при однократном обращении к процедуре 0F803H, либо при
       500-кратном обращении к процедуре 0F81BH (или их аналогов).

     - Принимается, что "Микро-80" и "ЮТ-88" работают на тактовой час-
       тоте 2 Мгц.

     - Для  "Микро-80" в ячейки констант обмена с магнитофоном автома-
       тически заносятся значения, соответствующие нормальной скорости
       на частоте 2 Мгц.

     - На "Микро-80" для процедуры F80C вывода байта на магнитофон вы-
       водимый байт передается в регистре A,  а не в C,  как в  других
       ПК.

     - После смены режима "Чт/Зап" на "Зап." в  "Микро-80",  возможно,
       окажется  необходимым  выполнить сброс (Alt-F11),  поскольку не
       происходит выход из стандартной процедуры чтения символа клави-
       атуры Монитора.

     - RAM-диск ЮТ-88 в снапшот не записывается.

     - Пауза работает только в режиме "Чт/Зап" эмулятора.

     4. Основные отличия ПК "Партнер",  "Радио-86РК", "Апогей",
        "Микроша", "Специалист" и "Орион".

     - Начало отображаемой части экранной области:
       "Партнер"          - 77BDH
       "РК-86", "Микроша" - 77C2H
       "Апогей"           - E1C2H

     - В ПК "Специалист" и "Орион" используется графический экран раз-
       решением 384x256 точек. Начало экранной области в "Специалисте"
      - 9000H, в "Орионе" - может меняться.

     - В "Партнере" используются 8 наборов знакогенератора и 3 атрибу-
       та отображения  символов,  задаваемые  управляющими  кодами.  В
       "Апогее" используются 2 набора, переключаемые сигналом на выхо-
       де INTE микропроцессора,  и 3 атрибута.  В "Микроше" - также  2
       набора, переключаемые битом 7 порта B ППА. (реализованы не  все
       наборы).

     - В ПК "Партнер" используется страничная организация памяти.  (не
       реализовано).

     - Различия в адресах портов контроллеров ЭЛТ,  ППА, ПДП. У "Парт-
       нера" и "Апогея" ПЗУ расположено по адресам F000-FFFF,  у "Спе-
       циалиста" - с адреса C000.

     - В "Партнере" команды EI и DI служат для управления прохождением
       сигнала прерывания (50 Гц),  а не для генерации  звука,  как  в
       РК-86. В "Апогее" они служат для переключения знакогенератора.

     - В ПК "Партнер" и "Апогей" в ПЗУ добавлена возможность работы  с
       магнитофоном в формате MSX с использованием частотной модуляции
       (используется в ПК "Ямаха", "Корвет" и т.д.). Для этого введены
       директивы W и R, а также несколько точек входа для подпрограмм.

     - В ПК "Партнер" отсутствует второй ППА, используемый для подклю-
       чения дополнительного ПЗУ.

     - В  "Партнере"  в  ПЗУ зашиты также бейсик и редактор+ассемблер,
       вызываемые по директивам B и A. (не реализовано).

     - Тактовая частота "Партнера" равна 2 МГц,  из-за чего  несколько
       различаются скорость работы программ а также параметры програм-
       мирования контроллера ЭЛТ.

     - В  "Партнере"  добавлена  удобная  директива Монитора Z - поиск
       слова в памяти. Из-за ошибки в Мониторе работает не всегда пра-
       вильно.

     - В "Апогее" добавлено несколько новых директив Монитора :
         W - поиск слова в памяти
         B - вывод на магнитофон в формате "Микроши"
         A - ввод с магнитофона в формате "Микроши"
         Q - определение констант чтения/записи при работе с магнито-
             фоном
         ...


     5. Будущие версии.

     В будущих версиях предполагается сделать следующее:

     - реализовать возможность задания типа Монитора в файле
       конфигурации
     - сделать поддержку ОС CP/M "Практик" для ПК "Специалист"
     - переключить доп. клавиатуру в режиме "Ориона" на цифры
     - сделать поддержку модуля контроллера дисковода для ПК
       "Партнер"
     - доделать перехват чтения и запись для всех команд 8080
     - вынести переключение режимов клавиатуры QWERTY/ЙЦУКЕНГ в меню
     - сделать поддержку кодов >=F0 с остановом ПДП для режима "Граф."
     - сделать поддержку кодов >=F0 пока без останова ПДП для режима
       не-"Граф."
     - сделать поддержку курсоров разной формы для режима "Граф."
     - сделать поддержку режима без отображения атрибутов для режима
       "Граф."
     - сделать поддержку клавиатуры МС7007 для Ориона
     - ввести возможность установки в конфигурационном файле
       уровней воспроизведения и записи, а также выбора источника
       сигнала для SoundBlaster'а
     - ввести автоматическую установку параметров Sound  Blaster'а  по
       переменной окружения BLASTER
     - ввести вывод справки по директивам Монитора прямо из эмулятора
     - ввести поддержку работы с Windows Sound System
     - добавить несколько новых горячих клавиш для смены режимов
     - ввести возможность смены директории при выборе файла
     - ввести встроенный отладчик

     Как видите,  список большой и, вероятно, неполный. Что будет сде-
лано в первую очередь,  зависит и от вас.  Пишите,  вносите также свои
предложения...


     6. Известные проблемы.

     - На "РК-86" при программировании таймера на длительность звука=1
       не  всегда выдерживается длительность звука,  вплоть до полного
       его пропадания.

     - При переключении с "Партнера" на "Микрошу" в режиме вывода зву-
       ка на Sound Blaster слышен непродолжительный посторонний звук.

     - При запуске в "чистой" DOS на некоторых машинах наблюдается за-
       висание эмулятора. Если у вас наблюдается данное явление, пиши-
       те мне:  я попрошу выполнить несколько тестов,  которые помогут
       локализовать и решить проблему.

     - На некоторых видеокартах  (Matrox)  возможно  обрезание  левого
       края экрана шириной 8 пикселов в режиме 800x600. Сделана специ-
       альная опция файла конфигурация для решения этой проблемы. Если
       это ваш случай,  напишите,  пожалуйста мне, на какой видеокарте
       он наблюдается.

     - На  видеокартах  Trident (по крайней мере,  старых) изображение
       может быть вытянуто по вертикали,  из-за чего  не  отображаются
       верхняя и нижняя его части.

     - Иногда выключается звук при выходе из меню.

     - В  последних  версиях может не полностью анализироваться запуск
       на EGA и CGA на предмет запрещения отдельных режимов.



     7. Распространение.

     Эмулятор распространяется совершенно свободно для некоммерческого
использования.  Данная программа поставляется "как есть", автор не не-
сет никакой ответственности за возможные негативные последствия, кото-
рые могут возникнуть в ходе ее эксплуатации.

     Последнюю версию  эмулятора  и программы для эмулируемых ПК можно
получить по адресу:

     http://www.uic.nnov.ru/~pyva/

     Здесь же можно найти ссылки  на  другие  эмуляторы  отечественных
компьютеров  на  базе  процессора 580ВМ80,  а также информацию по этим
компьютерам ("Вектор",  "Львов"  и т.п.).

     Эмулятор поставляется  в архиве emurkXXX.zip,  который должен со-
держать следующие файлы:

     EMU80.COM    - исполняемый модуль эмулятора
     ROMP.BIN     - Монитор В.03 "Партнера"
     ROMPV2.BIN   - Монитор В.02 "Партнера"
     ROMR.BIN     - Монитор "Радио-86РК" - 32K
     ROMR16.BIN   - Монитор "Радио-86РК" - 16K
     ROMR4K.BIN   - Расширенный Монитор "Радио-86РК" - 32K
     ROMA.BIN     - содержимое ПЗУ (Монитор) "Апогея"
     ROMM.BIN     - содержимое ПЗУ (Монитор) "Микроши"
     ROMS.BIN     - Загрузчик+Монитор-2 "Специалиста"
     ROMS1.BIN    - Загрузчик+Монитор-1 "Специалиста"
     ROMSM.BIN    - Загрузчик+Оконный Монитор "Специалиста"
     ROMSL.BIN    - Загрузчик+Монитор+Бейсик "Лика"
     ROMO.BIN     - Монитор-2 "Ориона"
     ROMO1.BIN    - Монитор-1 "Ориона"
     ROMOP.BIN    - Петербургский Монитор "Ориона"
     ROM80.BIN    - Монитор "Микро-80"
     ROMU.BIN     - Монитор "ЮТ-88"
     SYMGEN.BIN   - файл знакогенератора
     ROMDOSK.BIN  - содержимое ROMDISK'а "Ориона"
     FONTS.BIN    - знакогенераторы
     EMU80.TXT    - этот файл
     WHATSNEW.XXX - краткая информация изменениям в последней версии
     BASIC.RKP    - бейсик для "Партнера"
     ASM-ED.RKP   - редактор+ассемблер для "Партнера"
     DEBUG.RKP    - отладчик для "Партнера"
     DISASM.RKP   - дизассемблер для "Партнера"
     CIRCUS.RK    - игра "Цирк" (для любого ПК (для "Микроши" со звуком))
     XONIX.RK     - игра "Ксоникс" (для "Партнера" и "РК-86")
     STRAT.RK     - игра "Стратегия" на бейсике
     READ.ME      - прочтите, если раньше не работали на подобных ПК
     RSS.TXT      - описание формата файла снапшота
     EMU80.INI    - файл конфигурации эмулятора
     MONITOR.TXT  - описание директив Мониторов
     FAQ.TXT      - часто задаваемые вопросы и ответы на них
     UTIL\RRKWIN32.EXE - утилита для чтения файлов с МЛ
     UTIL\RRK.TXT      - документация к утилите RRKWIN32.EXE
     UTIL\WRKWIN32.EXE - утилита для записи файлов на МЛ
     UTIL\WRK.TXT      - документация к утилите WRKWIN32.EXE
     UTIL\BIN2RSS.EXE  - утилита для создания файлов снапшотов
     UTIL\BIN2RSS.TXT  - документация к утилите BIN2RSS
     UTIL\BINRSS_S.ZIP - исходный текст утилиты BIN2RSS (архив)
     FILE_ID.DIZ       - комментарий к архиву


     8. История.
               
     Версия 2.86
       - Введен новый режим - пауза,  включаемый/выключаемый  клавишей
         F12.
       - Исправлена ошибка: сигнал с магнитофона при эмуляции "Специа-
         листа" ошибочно считывался в инверсном виде.
       - Добавлена проверка на запись по адресу 0FFFFH для команд RST.
       - Исправлено множество синтаксических ошибок в документации.

     Версия 2.85
       - Новый видеорежим 80x40 с матрицей символа 8x12 (можно  отклю-
         чить в ini-файле в случае возникновения проблем).
       - В режиме "Граф." устранено смещение атрибута негатива на одно
         знакоместо.
       - В режиме "Граф." реализовано  смещение  положения  символа  в
         знакоместе на одну скан-линию,  если высота знакоместа превы-
         шает 8 скан-линий (как это и сделано в ВГ75).
       - Реализовано отображение курсора в реж. Граф. для ЮТ-88 и Мик-
         ро-80.
       - Исправлена  запись  Монитора в снапшот для Микроши (f800-ffff
         вместо f000-ffff).
       - Реализована поддержка RAM-диска в ЮТ-88.
       - Память  в ЮТ-88 сейчас заполняется байтом E5 при очистке (не-
         обходимо для нормальной работы с RAM-диском).
       - Устранена  ошибка,  проявлявшаяся при определенных условиях в
         том, что не сбрасывались в исходное состояние некоторые пара-
         метры при смене типа компьютера.
       - Другие незначительные исправления.
       - Содержимое  знакогенераторов выделено из кода эмулятора в от-
         дельный файл.
       - Изменен упаковщик (apack вместо pklite).
       - Устранены некоторые неточности в документации.

     Версия 2.81
       - Исправлена  ошибка  версии 2.80:  не работал режим "Граф." на
         "Микроше".

     Версия 2.80
       - Реализована поддержка ПК "Микро-80" и "ЮТ-88".
       - Реализована  поддержка  оригинального  знакогенератора  в  ПК
         "Апогей" (см. игры shmel.rka, gonki.rka, nesushka.rka и.т.д.)
       - Значительно переработана эмуляция таймера ВИ53.  В результате
         появился нормальный звук в некоторых  программах  (gonki.rka,
         tetris.rka и т.д.).
       - Переустановка  режима  экрана происходит только при необходи-
         мости (если изменились параметры программирования  контролле-
         ров ЭЛТ и ПДП).
       - Исправлена ошибка, проявлявшаяся в записи лишней информации в
         снапшот "Специалиста",  в результате чего его размер был зна-
         чительно увеличенным. На считывание эта ошибка не влияла.
       - Исправлена ошибка версии 2.75: не работало ускорение/замедле-
         ние для ПК "РК-86", "Микроша", "Партнер" и "Апогей".
       - Запрещен  выбор режима обновления экрана для "Ориона" и "Спе-
         циалиста".

     Версия 2.75
       - Реализована поддержка второго знакогенератора на Микроше.
       - Реализована поддержка джойстика на "Радио-86РК".
       - Реализована поддержка атрибута мерцания на Микроше.
       - Реализовано чтение регистров таймера ВИ53 (частично).
       - Реализованы каналы 0 и 1 таймера на Микроше.
       - Реализована  поддержка негатива и мерцания в режиме "Граф" на
         "Радио-86РК".
       - Реализована палитра 2 на Орионе в 4-цветном режиме.
       - Улучшена поддержка таймера на "Радио-86РК".
       - Устранено "дрожание" экрана,  если  одновременно  установлены
         режимы "Граф." и 50Гц.
       - Исправлена ошибка:  некорректно работал режим "50Гц" на "Мик-
         роше".
       - Скорректировано  перенаправление  ввода/вывода  с/на магнито-
         фон(а) в файл:  нормально работает  обмен  с  магнитофоном  в
         Win-системе.
       - Скорректирована обработка атрибутов и цвета для "Радио-86РК".
       - Скорректирована  скорость работы эмулятора при эмуляции "Мик-
         роши".
       - Исправлена ошибка: некорректно обрабатывались ключи установки
         типа компьютера, если в ini-файле стоял режим "Граф." (вплоть
         до зависания эмулятора).
       - В Alt-F1 добавлена подсказка по переключению qwerty/йцукен.

     Версия 2.71
       - Исправлена ошибка версии 2.70,  проявлявшаяся в  некорректной
         загрузке снапшотов.
       - Реализована поддержка цвета на "Радио-86РК".
       - Реализована поддержка атрибутов негатива и мерцания  на  "Ра-
         дио-86РК", "Партнере" и "Апогее" в текстовом режиме.
       - Реализована поддержка таймера ВИ53 на "Радио-86РК".
       - Добавлена новая опция в меню и параметр в ini-файле: управле-
         ние обновлением текстового экрана.
       - Исправлена ошибка версии 2.70: при попытке универсальной заг-
         рузки по Alt-F3 выводилась подсказка "ESC - отмена записи".
       - Исправлена  ошибка,  связанная с неправильной дешифрацией при
         записи в порт ППА на ПК  "Радио-86РК",  "Партнер",  "Апогей",
         из-за чего к нему нельзя было обращаться командой OUT.
       - Исправлена ошибка,  проявлявшаяся в заниженной больше  чем  в
         два раза частоте звучания таймера ВИ53 на встроенном динамике
         на ПК "Апогей".
       - Исправлена  ошибка, проявлявшаяся в некорректном восстановле-
         нии состояния таймера ВИ53 при загрузке снапшота ПК "Апогей".

     Версия 2.70
       - Реализована поддержка дисковода в ПК "Орион".
       - Реализован выбор Монитора из меню.
       - Устранено наблюдавшееся иногда на некоторых машинах зависание
         эмулятора в режиме вывода звука на Sound Blaster.
       - Проведена оптимизация ядра эмулятора  на  предмет  исключения
         команд pushf и popf, благодаря чему эмулятор сейчас нормально
         работает в DOSEMU.
       - Реализована  возможность ускорения/замедления работы эмулято-
         ра.
       - Добавлена проверка на запись в видео-ОЗУ и порты  для  команд
         CALL, CZ, CJZ, CC, CNC, CPO, CPE, CP, CM.
       - Добавлена  проверка  на чтение из портов для команд RET,  RZ,
         RNZ, RC, RNC, RPO, RPE, RP, RM.
       - Реализована загрузка файлов *.BRU,  *.RKO,  *.ODI в командной
         строке.
       - Реализована универсальная загрузка файлов большинства поддер-
         живаемых форматов по Alt-F3.
       - Исправлено множество ошибок и неточностей в документации.

     Версия 2.60
       - Введена поддержка ПК "Орион" с 256К памяти, пока без поддерж-
         ки дисковода.
       - Добавлена проверка на запись в видео-ОЗУ и порты для  команды
         OUT
       - Добавлена проверка на чтение из портов для команды POP
       - Исправлена  ошибка:  производилась  запись  в  область экрана
         B800:xxxx в режиме "Граф."
       - Реализована  ограниченная  поддержка кодов C0-EF при эмуляции
         ВГ75.
       - В  состав  документации  включены  ответы на часто задаваемые
         вопросы (FAQ.TXT).

     Версия 2.50
       - Реализовано задание типа компьютера в командной строке.
       - Реализована загрузка РК?-файлов из командной  строки  или  по
         Alt-F3 (контрольная сумма пока не анализируется).
       - Если отсутствует или занят  SoundBlaster,  сейчас  происходит
         автоматическое переключение в режим PC Speaker.
       - Обновлено и дополнено описание директив Монитора (файл
         MONITOR.TXT).

     Версия 2.44
       - Исправлена ошибка в работе с  SoundBlaster'ом,  проявлявшаяся
         на некоторых компьютерах в зависании эмулятора в этом режиме.
       - Исправлены некоторые неточности в документации.
       - Добавлен файл MONITOR.TXT с описанием директив Мониторов эму-
         лируемых компьютеров.

     Версия 2.40
       - Для всех ПК реализован вывод на звуковую карту сигнала, посы-
         лаемого на магнитофонный выход.
       - Реализовано  чтение сигнала с магнитофонного входа через зву-
         ковую карту.
       - Как следствие первых двух пунктов, возможность непосредствен-
         ного обмена данными с магнитофоном, как в формате РК, так и в
         формате MSX, а также в нестандартных форматах.
       - Введена дополнительная опция "Магнитофон" (и  соответствующий
         параметр файла конфигурации),  указывающая, производить вывод
         звука на магнитофон, ввод с него или перенаправлять обращения
         к магнитофону в файл.
       - Реализована подстройка скорости работы эмулятора Партнера при
         программировании контроллера ПДП только на регенерацию ОЗУ
       - Реализовано управление скоростью работы  эмулятора  в  режиме
         вывода звука на Sound Blaster (в том числе и в зависимости от
         режима ПДП).
       - Введена опция ini-файла mga_fix,  которая может оказаться не-
         обходимой для корректной работы эмулятора Специалиста в режи-
         ме 800x600 на некоторых видеокартах (Matrox?)
       - Добавлена проверка на чтение слова по адресу 0FFFFH  для  ко-
         манд POP reg.

     Версия 2.30
       - Введен режим эмуляции контроллера ЭЛТ ВГ75 в графическом  ре-
         жиме  с  поддержкой  дополнительных наборов знакогенератора и
         атрибутов изображения.
       - Введена эмуляция бита 5 регистра режима ВГ75, отражающего мо-
         мент обратного хода луча.
       - Устранена  ошибка,  впервые  появившаяся  еще в версии 1.06 и
         проявлявшаяся иногда в некотором замедлении работы  эмулятора
         (на несколько процентов).
       - Устранен некорректный старт эмулятора в режиме "Специалиста",
         если в ini-файле указан режим экрана, отличный от Auto.
       - Если ini-файл не найден в текущей директории,  теперь берутся
         настройки из файла emu80.ini из директории, где находится ос-
         новной com-файл.
       - Немного переработана работа с Sound Blaster.  Надеюсь, сейчас
         будет меньше проблем с совместимостью.
       - Устранена ошибка в обработчике прерывания клавиатуры, появив-
         шаяся еще в версии 1.50.  Возможно, будет устранено наблюдав-
         шееся на некоторых машинах "залипание" клавиш.

     Версия 2.20
       - Введена поддержка вывода  звука  на  SoundBlaster-совместимую
         звуковую карту.
       - Исправлена  ошибка:  замедленная  скорость  работы  ПК   "Ра-
         дио-86РК", "Апогей", "Микроша" при отключенном режиме ПДП.
       - В ini-файле сейчас предустановлен режим rw для параметра mem.

     Версия 2.17
       - Исправлена ошибка: неправильно отрабатывалась русская "М" при
         эмуляции "Специалиста" в режиме Чт/Зап при включенном  режиме
         клавиатуры РК (Scroll Lock)
       - Сделана поддержка таймера ВИ53 в ПК "Апогей"

     Версия 2.15
       - Введена поддержка цвета для ПК "Специалист"
       - Цифровая клавиатура в "Специалисте" сейчас работает как  циф-
         ры, а не как стрелки. Клавиша Edit переназначена на NumLock.
       - Исправлена ошибка: не работала русская буква "Р" в режиме Зап.
       - Введена  возможность запретить использование светодиодов кла-
         виатуры
       - Исправлена ошибка: при отсутствии конфигурационного файла или
         строки mem= в нем неправильно устанавливался данный  параметр
         по умолчанию для "Специалиста"

     Версия 2.12
       - Введена возможность отключения звука
       - Исправлена ошибка в реализации команды DAD: флаги P и AC очи-
         щались, хотя должны оставаться без изменения
       - Исправлена  ошибка:  при  перемещении по меню самопроизвольно
         включался перехват 0F809H в режиме "Специалиста" с непредска-
         зуемыми последствиями

     Версия 2.11
       - Исправлена ошибка версии 2.10:  игнорировался параметр mem  в
         файле конфигурации
       - Внесены изменения в файл Загрузчика ПК "Специалист"  с  целью
         устранения попытки ввода с магнитофона при холодном старте

     Версия 2.10
       - Поддержка ПК "Специалист"
       - Исправлена ошибка в реализации команды LDAX B в режиме "Чт/Зап"
       - Устранено возможное "залипание" клавиш при выходе из меню
       - Инструкция с кодом 0CBH сейчас интерпретируется как JMP
       - Устранено требование наличия кода C9 по адресу FFFF
       - Устранено  возможное несоответствие реальных настроек и отоб-
         ражаемых в меню
       - Исправлена ошибка: частота прерываний сейчас равна 50Гц, а не
         100, как ошибочно было ранее
       - Исправлена  работа со звуком на "Микроше" (но,  вероятно,  не
         полностью)

     Версия 2.00
       - Введен программный выбор типа ПК
       - Введена поддержка файла конфигурации
       - Введена поддержка snapshot'ов
       - Введена возможность получения подсказки
       - Введены горячие клавиши для Reset и выхода
       - Введена подсветка файлов в зависимости от типа ПК
       - Теперь запоминается текущая позиция в меню
       - Исправлена ошибка: неполная очистка экрана в режиме не "авто"
         при включенном перехвате 0F809H
       - Исправлена ошибка,  иногда проявлявшаяся в отсутствии реакции
         на клавишу F10 и невозможности выхода из эмулятора

     Версия 1.81
       - Значительно  уменьшено  время реакции на клавишу F10 в режиме
         максимальной скорости эмуляции
       - Введена поддержка прерывания от таймера в эмуляторе ПК "Парт-
         нер"

     Версия 1.80
       - Эмулятор  теперь поддерживает форматы файлов с первым синхро-
         байтом при чтении и записи (форматы эмулятора pkemul02  Алек-
         сандра Демина)
       - В списке файлов теперь работают клавиши PgUp и PgDn
       - Теперь прячется текстовый курсор при выборе файла из списка
       - Файлы в списке теперь отсортированы по расширению
       - Введена расцветка файлов в списке в зависимости от типа (рас-
         ширения)
       - Исправлена ошибка в эмуляторах "Радио-86РК" и "Микроши", про-
         являвшаяся  в отсутствии реакции на клавиатуру РК при нестан-
         дартном программировании ВГ75.
       - Исправлена  ошибка,  проявлявшаяся  в неполном восстановлении
         режима экрана при выходе из программы,  если  был  установлен
         режим 43 строки.

     Версия 1.70
       - Введена возможность выбора файлов из списка при чтении.
       - Отслеживается влияние режима ПДП на скорость эмуляции.

     Версия 1.60
       - В состав пакета включена утилита для записи файлов на МЛ фай-
         лов в формате РК (WRKWIN32.EXE).
       - Файлы  romx.bin  сейчас  ищутся не в текущей директории,  а в
         той,  где расположен основной com-файл,  что дает возможность
         запускать эмулятор из другой директории.

     Версия 1.50
       - Добавлена эмуляция портов клавиатуры.
       - Добавлена проверка на наличие EGA и возможность работы на CGA.
       - Исправлена ошибка при перемещении курсора по диалоговому окну.
       - Исправлена ошибка, иногда проявлявшаяся при включенном перех-
         вате  0F809H в неправильном позиционировании выводимого текс-
         та.
       - Значительно переработана и исправлена документация.

     Версия 1.10
       - Добавлена поддержка нестандартного программирования  контрол-
         лера ЭЛТ ВГ75.
       - Исправлена ошибка,  проявляющаяся в эмуляторе ПК "Апогей" при
         очистке экрана с включенным перехватом 0F809H.
       - Добавлена проверка на запись в видео-ОЗУ и порты  для  команд
         INR M и DCR M.
       - Введен новый видеорежим 80x43 для VGA и EGA.
       - Добавлена  загрузка оригинального знакогенератора РК на адап-
         тере EGA (в режиме 80x43).
       - Исправлена ошибка,  проявлявшаяся в несколько завышенной ско-
         рости работы эмуляторов "Радио-86РК", "Микроша" и "Апогей".

     Версия 1.06
       - Введен  строгий  контроль за скоростью выполнения программ (в
         том числе и под Windows).
       - Режим  загрузки  знакогенератора РК сейчас не запрещается под
         Windows, но по умолчанию не устанавливается.

     Версия 1.05
       - Добавлена версия для ПК "Микроша".
       - Исправлена ошибка,  иногда проявлявшаяся в зависании при чте-
         нии из файла с неправильным форматом.

     Версия 1.04
       - Введена проверка на выполнение под Windows NT и
         установка по умолчанию перехвата 0F809H в таком случае.
       - Добавлена проверка на запись в видео-ОЗУ и порты для
         команды SHLD.
       - В состав пакета включена утилита для чтения с МЛ файлов,
         записанных в формате РК (RRKWIN32.EXE).

     Версия 1.03
       - Добавлена загрузка оригинального знакогенератора РК
       - Введено  блокирование режима 78*30, если отсутствует
         адаптер VGA.

     Версия 1.02
       - Незначительные  изменения.  Исправлена и дополнена документа-
         ция.

     Версия 1.01
       - Добавлены версии для "РК-86" и "Апогея".
       - Исправлена ошибка при отключении перехвата 0F809H.

     Версия 1.00
       - Оригинальная версия.


     9. Благодарности.

     Автор выражает благодарность всем,  кто так или иначе оказал  по-
мощь в работе над эмулятором (в алфавитном порядке):

     Григорию Березовскому
     Сергею Богданову
     Александру Болтаевскому
     Максу Васильеву
     Эдуарду Волкову
     Олегу Воронову
     Михаилу Голованову
     Сергею Горохову
     Александру Демину
     Дмитрию Дмитриеву
     Александру Дядюро
     Евгению Гришину
     Сергею Ерохину
     Александру Карпову
     Сергею Косарецкому
     Игорю Кострикину
     Юрию Лесных
     Константину Максатову
     Максиму Маркелову
     Юрию Мордвинову
     Александру Никольскому
     Роману Пантелееву
     Алексею Петракову
     Станиславу Селютину
     Андрею Семенову
     Роману Сузи
     Михаилу Таланову
     Андрею Тиханову
     Александру Шабаршину
     Александру Шевцову
     
     а также всем, кого случайно забыл упомянуть...



                                Виктор А. Пыхонин


                                 E-mail: pyva@uic.nnov.ru
                                    WWW: http://www.uic.nnov.ru/~pyva/
                                ICQ UIN: 19699862 (Pyk)
                                   FIDO: 2:5015/39.2 (Victor Pykhonin)


                                                           19.12.2000.

